"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[9924],{8454(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"ARCHITECTURE","title":"Architecture","description":"Overview","source":"@site/docs/ARCHITECTURE.md","sourceDirName":".","slug":"/ARCHITECTURE","permalink":"/data-governance-pipeline/docs/ARCHITECTURE","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Decision Log","permalink":"/data-governance-pipeline/docs/DECISION_LOG"},"next":{"title":"Changelog","permalink":"/data-governance-pipeline/docs/CHANGELOG"}}');var t=r(4848),s=r(8453);const l={},a="Architecture",d={},c=[{value:"Overview",id:"overview",level:2},{value:"System Diagram",id:"system-diagram",level:2},{value:"Pipeline Flow",id:"pipeline-flow",level:2},{value:"Component Breakdown",id:"component-breakdown",level:2},{value:"main.py",id:"mainpy",level:3},{value:"extract.py",id:"extractpy",level:3},{value:"transform.py",id:"transformpy",level:3},{value:"dq_checks.py",id:"dq_checkspy",level:3},{value:"load.py",id:"loadpy",level:3},{value:"Data Lineage",id:"data-lineage",level:2},{value:"Technology Decisions",id:"technology-decisions",level:2},{value:"Known Limitations",id:"known-limitations",level:2}];function o(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"This document describes the end-to-end architecture of the Data Governance Pipeline. The pipeline follows a standard ETL pattern with an embedded data quality validation layer between transform and load."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"system-diagram",children:"System Diagram"}),"\n",(0,t.jsx)(n.mermaid,{value:"flowchart LR\n    A[NYC 311 Open Data API] --\x3e|HTTP GET| B[extract.py]\n    B --\x3e|raw DataFrame| C[transform.py]\n    C --\x3e|cleaned DataFrame| D[dq_checks.py]\n    D --\x3e|clean DataFrame| E[load.py]\n    D --\x3e|DQ Report CSV| F[reports/]\n    E --\x3e|nyc311_clean table| G[(SQLite DB)]\n    E --\x3e|lineage_log table| G"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"pipeline-flow",children:"Pipeline Flow"}),"\n",(0,t.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant M as main.py\n    participant E as extract.py\n    participant T as transform.py\n    participant D as dq_checks.py\n    participant L as load.py\n    participant DB as SQLite\n\n    M->>E: extract_nyc_311(limit)\n    E->>E: GET NYC 311 API\n    E--\x3e>M: raw_df (1000-5000 rows)\n\n    M->>T: transform(raw_df)\n    T->>T: drop columns\n    T->>T: parse dates\n    T->>T: fix dtypes\n    T->>T: standardize strings\n    T->>T: add derived columns\n    T--\x3e>M: transformed_df\n\n    M->>D: run_dq_checks(transformed_df)\n    D->>D: run 6 DQ rules\n    D--\x3e>M: clean_df + dq_report\n\n    M->>L: load(clean_df)\n    L->>DB: write nyc311_clean table\n    L->>DB: write lineage_log table\n    L--\x3e>M: confirmed row count\n\n    M->>M: export DQ report CSV"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"component-breakdown",children:"Component Breakdown"}),"\n",(0,t.jsx)(n.h3,{id:"mainpy",children:"main.py"}),"\n",(0,t.jsx)(n.p,{children:"Entry point for the full pipeline. Orchestrates all four modules in sequence, handles CLI arguments, logs pipeline summary, and exports the DQ report."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key responsibilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Accept ",(0,t.jsx)(n.code,{children:"--limit"})," CLI argument for row count"]}),"\n",(0,t.jsx)(n.li,{children:"Call extract \u2192 transform \u2192 dq_checks \u2192 load in sequence"}),"\n",(0,t.jsx)(n.li,{children:"Log pipeline summary (duration, rows extracted, rows dropped, DQ results)"}),"\n",(0,t.jsx)(n.li,{children:"Export timestamped DQ report CSV to reports/"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"extractpy",children:"extract.py"}),"\n",(0,t.jsx)(n.p,{children:"Pulls raw data from the NYC Open Data API and returns a pandas DataFrame."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key responsibilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"HTTP GET request to NYC 311 endpoint with configurable row limit"}),"\n",(0,t.jsx)(n.li,{children:"Error handling for connection failures, timeouts, and HTTP errors"}),"\n",(0,t.jsx)(n.li,{children:"Schema detection and logging"}),"\n",(0,t.jsx)(n.li,{children:"Lineage metadata logging on every extraction"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'NYC_311_URL = "https://data.cityofnewyork.us/resource/erm2-nwe9.csv"\nDEFAULT_LIMIT = 50000\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"transformpy",children:"transform.py"}),"\n",(0,t.jsx)(n.p,{children:"Applies all cleaning and standardization operations to the raw DataFrame."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key responsibilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Drop 12 columns with 90%+ null rate"}),"\n",(0,t.jsx)(n.li,{children:"Parse date strings to datetime objects"}),"\n",(0,t.jsx)(n.li,{children:"Fix incorrect data types (zip as string, council_district as Int64)"}),"\n",(0,t.jsx)(n.li,{children:"Standardize string columns (strip whitespace, title case)"}),"\n",(0,t.jsx)(n.li,{children:"Add derived columns (resolution_hours, is_open, created_year, created_month)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Input:"})," Raw DataFrame (44 columns)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Output:"})," Cleaned DataFrame (36 columns)"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"dq_checkspy",children:"dq_checks.py"}),"\n",(0,t.jsx)(n.p,{children:"Applies 6 governance rules to the transformed DataFrame and returns a clean DataFrame and DQ report."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key responsibilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Run all 6 DQ rules against transformed data"}),"\n",(0,t.jsx)(n.li,{children:"Classify each rule result as PASS, FAIL, or WARN"}),"\n",(0,t.jsx)(n.li,{children:"Drop rows that violate critical (FAIL) rules"}),"\n",(0,t.jsx)(n.li,{children:"Return clean DataFrame and structured DQ report"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Input:"})," Transformed DataFrame (36 columns)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Output:"})," Clean DataFrame + DQ Report DataFrame"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Rule"}),(0,t.jsx)(n.th,{children:"Severity"}),(0,t.jsx)(n.th,{children:"Action on Violation"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DQ-001 Descriptor Not Null"}),(0,t.jsx)(n.td,{children:"Critical"}),(0,t.jsx)(n.td,{children:"Drop row"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DQ-002 Zip Code Format"}),(0,t.jsx)(n.td,{children:"Non-Critical"}),(0,t.jsx)(n.td,{children:"Flag row"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DQ-003 Coordinate Completeness"}),(0,t.jsx)(n.td,{children:"Critical"}),(0,t.jsx)(n.td,{children:"Drop row"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DQ-004 Open/Closed Flag Consistency"}),(0,t.jsx)(n.td,{children:"Critical"}),(0,t.jsx)(n.td,{children:"Drop row"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DQ-005 Unique Key Integrity"}),(0,t.jsx)(n.td,{children:"Critical"}),(0,t.jsx)(n.td,{children:"Drop row"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DQ-006 Resolution Description Consistency"}),(0,t.jsx)(n.td,{children:"Non-Critical"}),(0,t.jsx)(n.td,{children:"Flag row"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"loadpy",children:"load.py"}),"\n",(0,t.jsx)(n.p,{children:"Persists the clean DataFrame to SQLite and logs lineage metadata."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key responsibilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Write clean DataFrame to ",(0,t.jsx)(n.code,{children:"nyc311_clean"})," table"]}),"\n",(0,t.jsxs)(n.li,{children:["Write lineage metadata to ",(0,t.jsx)(n.code,{children:"lineage_log"})," table"]}),"\n",(0,t.jsx)(n.li,{children:"Verify row count after load"}),"\n",(0,t.jsxs)(n.li,{children:["Expose ",(0,t.jsx)(n.code,{children:"query()"})," helper for running SQL against the database"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Database:"})," ",(0,t.jsx)(n.code,{children:"reports/nyc311.db"}),(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Tables:"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"nyc311_clean"})," \u2014 clean complaint records"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lineage_log"})," \u2014 load event metadata"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"data-lineage",children:"Data Lineage"}),"\n",(0,t.jsx)(n.mermaid,{value:"flowchart TD\n    A[NYC Open Data API] --\x3e|raw 44 columns| B[Staging]\n    B --\x3e|drop 12 columns| C[36 columns]\n    C --\x3e|parse dates + fix types| D[typed DataFrame]\n    D --\x3e|DQ validation| E{DQ Gate}\n    E --\x3e|FAIL rows dropped| F[Quarantine]\n    E --\x3e|WARN rows flagged| G[Clean DataFrame]\n    E --\x3e|PASS rows| G\n    G --\x3e|load| H[(nyc311_clean)]\n    G --\x3e|metadata| I[(lineage_log)]\n    E --\x3e|results| J[DQ Report CSV]"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"technology-decisions",children:"Technology Decisions"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Decision"}),(0,t.jsx)(n.th,{children:"Choice"}),(0,t.jsx)(n.th,{children:"Rationale"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Language"}),(0,t.jsx)(n.td,{children:"Python 3.11.5"}),(0,t.jsx)(n.td,{children:"Industry standard for data pipelines"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Data manipulation"}),(0,t.jsx)(n.td,{children:"pandas"}),(0,t.jsx)(n.td,{children:"Best in class for tabular data processing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"HTTP client"}),(0,t.jsx)(n.td,{children:"requests"}),(0,t.jsx)(n.td,{children:"Simple, reliable API consumption"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Storage"}),(0,t.jsx)(n.td,{children:"SQLite"}),(0,t.jsx)(n.td,{children:"Zero setup, portable, sufficient for portfolio scale"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Docs site"}),(0,t.jsx)(n.td,{children:"Docusaurus"}),(0,t.jsx)(n.td,{children:"Professional UI, GitHub Pages compatible, Mermaid support"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CI/CD"}),(0,t.jsx)(n.td,{children:"GitHub Actions"}),(0,t.jsx)(n.td,{children:"Native to GitHub, free, auto-deploys on push"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"known-limitations",children:"Known Limitations"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Limitation"}),(0,t.jsx)(n.th,{children:"Impact"}),(0,t.jsx)(n.th,{children:"Mitigation"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"SQLite not suitable for concurrent writes"}),(0,t.jsx)(n.td,{children:"Single user only"}),(0,t.jsx)(n.td,{children:"Acceptable for portfolio project"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DQ checks run synchronously"}),(0,t.jsx)(n.td,{children:"Performance bottleneck at 500k+ rows"}),(0,t.jsx)(n.td,{children:"Tracked as R-003 in Risk Register"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"No incremental loading"}),(0,t.jsx)(n.td,{children:"Full refresh on every run"}),(0,t.jsx)(n.td,{children:"Acceptable at current scale"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"API dependency"}),(0,t.jsx)(n.td,{children:"Pipeline fails if NYC Open Data is down"}),(0,t.jsx)(n.td,{children:"Error handling in extract.py surfaces failures clearly"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);